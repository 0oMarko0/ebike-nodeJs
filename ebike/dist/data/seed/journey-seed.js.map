{"version":3,"file":"journey-seed.js","sourceRoot":"","sources":["../../../src/data/seed/journey-seed.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,gEAAwC;AACxC,0DAAkC;AAGlC,MAAqB,WAAY,SAAQ,kBAAQ;IAE7C,YAAY,WAAwB;QAChC,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;IACnC,CAAC;IAEK,KAAK;;YACP,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC,8BAA8B,CAAC,CAAC;YACvE,MAAM,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;YAC9B,IAAI;gBACA,QAAQ,CAAC,GAAG,CAAC,CAAO,GAAQ,EAAE,EAAE;oBAC5B,MAAM,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC,CAAC;gBACrE,CAAC,CAAA,CAAC,CAAC;aACN;YAAC,OAAO,CAAC,EAAE;gBACT,gBAAM,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;aAC1B;YACD,gBAAM,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;QACxC,CAAC;KAAA;IAEO,SAAS,CAAC,GAAQ,EAAE,IAAY;QACpC,OAAO;YACH,aAAa,EAAE,GAAG,CAAC,UAAU,CAAC,YAAY;YAC1C,OAAO,EAAE,GAAG,CAAC,UAAU,CAAC,cAAc;YACtC,WAAW,EAAE,GAAG,CAAC,UAAU,CAAC,wBAAwB;YACpD,IAAI;YACJ,OAAO,EAAE,GAAG,CAAC,OAAO;YACpB,QAAQ,EAAE,GAAG,CAAC,QAAQ;SACzB,CAAC;IACN,CAAC;CACJ;AA9BD,8BA8BC","sourcesContent":["import logger from \"../../utils/logger\";\nimport ReadFile from \"./readFile\";\nimport JourneyRepo from \"../repository/journey-repo\";\n\nexport default class JourneySeed extends ReadFile {\n    private journeyRepo: JourneyRepo;\n    constructor(journeyRepo: JourneyRepo) {\n        super();\n        this.journeyRepo = journeyRepo;\n    }\n\n    async start() {\n        const { features } = this.readFromfile(\"sherbrooke_bike_path.geojson\");\n        await this.journeyRepo.drop();\n        try {\n            features.map(async (row: any) => {\n                await this.journeyRepo.create(this.translate(row, \"Sherbrooke\"));\n            });\n        } catch (e) {\n           logger.error(e.message);\n        }\n        logger.info(\"SEEDING journey DONE\");\n    }\n\n    private translate(row: any, city: string) {\n        return {\n            segmentLength: row.properties.Shape_Length,\n            coating: row.properties.TYPEREVETEMENT,\n            destination: row.properties.NOMDESTINATIONSHERBROOKE,\n            city,\n            created: row.created,\n            geometry: row.geometry,\n        };\n    }\n}\n"]}